{% load static %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Список студентов</title>
    <link rel="stylesheet" href="{% static 'students/css/style.css' %}">
</head>
<body>
    <h1>Список студентов</h1>

    <!-- Кнопка добавления студента -->
    <div class="container">
        {% if perms.students.add_student %}
            <a href="{% url 'add_student' %}">
                <button>Добавить студента</button>
            </a>
        {% endif %}
    </div>

    <!-- Блок выхода -->
    <div class="logout-container">
        <p>Вы вошли как <b>{{ user.username }}</b></p>
        <a href="{% url 'logout' %}">
            <button class="logout-button">Выйти</button>
        </a>
    </div>

    <!-- Таблица со студентами -->
    {% if students %}
        <table>
            <tr>
                <th>Имя</th>
                <th>Фамилия</th>
                <th>Возраст</th>
                <th>Группа</th>
                <th>Клубы</th>
                <th>Действия</th>
            </tr>

            {% for student in students %}
                <tr>
                    <td>{{ student.first_name }}</td>
                    <td>{{ student.last_name }}</td>
                    <td>{{ student.age }}</td>
                    <td>{{ student.group }}</td>
                    <td>
                        {% if student.clubs.all %}
                            {% for club in student.clubs.all %}
                                {{ club.name }}{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        {% else %}
                            —
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'student_detail' student.id %}">Подробнее</a>

                        {% if perms.students.change_student %}
                            | <a href="{% url 'edit_student' student.id %}">Редактировать</a>
                        {% endif %}

                        {% if perms.students.delete_student %}
                            | <a href="{% url 'delete_student' student.id %}">Удалить</a>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p style="text-align:center;">Студентов пока нет</p>
    {% endif %}
</body>
</html>


